{% extends 'base.html' %}

{% load custom_filters %}

{% block title %}
    Batch History
{% endblock %}

{% block content %}
<div class="d-flex flex-column align-items-center justify-content-between my-4">
    <h1>Batch History</h1>
    <a class="fw-semibold fs-5 py-1 px-3 rounded-pill bg-primary text-white text-decoration-none" href="{% url 'batch_detail' batch.id %}">{{ batch.batch_number }}</a>
</div>
<div class="grid-container gap-0">
    {% for change in changes %}
    <div class="grid-item">
        <div class="grid-item rounded-3 shdw border border-light-subtle">
            <div class="d-flex flex-column gap-1 w-100">
                <div class="d-flex flex-row align-items-center gap-1 bg-darky-light px-2 rounded-2 w-100">
                    <p class="m-0 fw-medium">Timestamp:</p>
                    <p class="m-0 fw-semibold">{{ change.timestamp|date:"F j, Y, P" }}</p>
                </div>
                <div class="d-flex flex-row align-items-center gap-1 bg-darky-light px-2 rounded-2 w-100">
                    <p class="m-0 fw-medium">User:</p>
                    <p class="m-0 fw-semibold text-capitalize">{{ change.user }}</p>
                </div>
                <div class="d-flex flex-row align-items-center gap-1 bg-darky-light px-2 rounded-2 w-100">
                    <p class="m-0 fw-medium">Field:</p>
                    <p class="m-0 fw-semibold">{{ change.field }}</p>
                </div>
                <div class="d-flex flex-row align-items-center gap-1 bg-darky-light px-2 rounded-2 w-100">
                    <p class="m-0 fw-medium">Old Value:</p>
                    <p class="m-0 fw-semibold">{{ change.old }}</p>
                </div>
                <div class="d-flex flex-row align-items-center gap-1 bg-darky-light px-2 rounded-2 w-100">
                    <p class="m-0 fw-medium">New Value:</p>
                    <p class="m-0 fw-semibold">{{ change.new }}</p>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}